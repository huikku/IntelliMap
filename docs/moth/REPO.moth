#MOTH:repo
meta:{project:spark-intellishot;version:1.2;date:2025-10-25;hash:sha256:eb93a5f5626312fee3b16e5e01d0f979001872a7963f2029cb3cd864785072dd;parent:sha256:none}
@INDEX count:259 checksum:sha1:07970d27427ded8e3fd31dfe3deeb3009193b1ab
@FILES
./.c8rc.json | {fanin:0;fanout:0;depth:1;churn:0;loc:22;complexity:1;coverage:0} |  |  | No documentation available | root .c8rc.json
./.claude/settings.local.json | {fanin:0;fanout:0;depth:1;churn:0;loc:34;complexity:1;coverage:0} |  |  | No documentation available | .claude settings.local.json
./.intellimap/graph.json | {fanin:0;fanout:1;depth:1;churn:0;loc:4784;complexity:1;coverage:0} | →[@external:
    },
    {
      ] |  | No documentation available | .intellimap graph.json (large file)
./.nycrc.json | {fanin:0;fanout:0;depth:1;churn:0;loc:31;complexity:1;coverage:0} |  |  | No documentation available | root .nycrc.json
./Image generation with Gemini (aka Nano B.py | {fanin:0;fanout:8;depth:1;churn:0;loc:315;complexity:34;coverage:0} | →[@external:google,@external:google.genai,@external:PIL,@external:io,@external:genai,@external:types,@external:Image,@external:BytesIO] |  | No documentation available | root Image generation with Gemini (aka Nano B.py (large file) (high complexity)
./appspec.yml | {fanin:0;fanout:0;depth:1;churn:0;loc:25;complexity:1;coverage:0} |  |  | No documentation available | root appspec.yml
./config/helpers.json | {fanin:0;fanout:0;depth:1;churn:0;loc:41;complexity:1;coverage:0} |  |  | No documentation available | config helpers.json
./docker-compose.prod.yml | {fanin:0;fanout:0;depth:1;churn:72;loc:132;complexity:7;coverage:0} |  |  | No documentation available | root docker-compose.prod.yml (large file) (frequently changed)
./docker-compose.spark.yml | {fanin:0;fanout:0;depth:1;churn:132;loc:121;complexity:3;coverage:0} |  |  | No documentation available | root docker-compose.spark.yml (large file) (frequently changed)
./docker-compose.yml | {fanin:0;fanout:0;depth:1;churn:2;loc:35;complexity:1;coverage:0} |  |  | No documentation available | root docker-compose.yml
./docs/nano-banana-masking/Morpheus–NanoBanana-Mask-Light-Version1.01.json | {fanin:0;fanout:0;depth:1;churn:0;loc:706;complexity:9;coverage:0} |  |  | No documentation available | docs Morpheus–NanoBanana-Mask-Light-Version1.01.json (large file)
./docs/topaz-labs-image-api.yaml | {fanin:0;fanout:0;depth:1;churn:0;loc:2311;complexity:194;coverage:0} |  |  | No documentation available | docs topaz-labs-image-api.yaml (large file) (high complexity)
./docs/zero-knowledge-db/examples/snapshots/project-index.snapshot.json | {fanin:0;fanout:0;depth:1;churn:0;loc:21;complexity:1;coverage:0} |  |  | No documentation available | docs project-index.snapshot.json
./docs/zero-knowledge-db/examples/snapshots/shot-index.snapshot.json | {fanin:0;fanout:0;depth:1;churn:0;loc:24;complexity:1;coverage:0} |  |  | No documentation available | docs shot-index.snapshot.json
./docs/zero-knowledge-db/schemas/date-manifest.schema.json | {fanin:0;fanout:0;depth:1;churn:0;loc:15;complexity:1;coverage:0} |  |  | No documentation available | docs date-manifest.schema.json
./docs/zero-knowledge-db/schemas/generation-event.schema.json | {fanin:0;fanout:0;depth:1;churn:0;loc:86;complexity:1;coverage:0} |  |  | No documentation available | docs generation-event.schema.json
./docs/zero-knowledge-db/schemas/index-journal-line.schema.json | {fanin:0;fanout:0;depth:1;churn:0;loc:20;complexity:1;coverage:0} |  |  | No documentation available | docs index-journal-line.schema.json
./docs/zero-knowledge-db/schemas/project-index.schema.json | {fanin:0;fanout:0;depth:1;churn:0;loc:31;complexity:1;coverage:0} |  |  | No documentation available | docs project-index.schema.json
./docs/zero-knowledge-db/schemas/shot-index.schema.json | {fanin:0;fanout:0;depth:1;churn:0;loc:32;complexity:1;coverage:0} |  |  | No documentation available | docs shot-index.schema.json
./eslint.config.js | {fanin:0;fanout:8;depth:1;churn:27;loc:59;complexity:2;coverage:0} | →[@external:@eslint/js,@external:typescript-eslint,@external:eslint-plugin-react-hooks,@external:eslint-plugin-react-refresh,@external:js,@external:tseslint,@external:reactHooks,@external:reactRefresh] |  | Flat ESLint config for ESLint v9+ | root eslint.config.js
./find-devtest-project.js | {fanin:0;fanout:1;depth:1;churn:0;loc:107;complexity:25;coverage:0} | →[@external:node-fetch] |  | Find DevTest project space ID | root find-devtest-project.js (large file) (high complexity)
./organisations_rows.json | {fanin:0;fanout:0;depth:1;churn:0;loc:1;complexity:1;coverage:0} |  |  | No documentation available | root organisations_rows.json (small file)
./package-lock.json | {fanin:0;fanout:0;depth:1;churn:2427;loc:9621;complexity:1;coverage:0} |  |  | No documentation available | root package-lock.json (large file) (frequently changed)
./package.json | {fanin:0;fanout:0;depth:1;churn:10;loc:74;complexity:1;coverage:0} |  |  | No documentation available | root package.json
./public/config/asset-style-presets.json | {fanin:0;fanout:0;depth:1;churn:161;loc:126;complexity:4;coverage:0} |  |  | ==================== NEW: CGI / 3D EXPANSIONS ==================== */ | public asset-style-presets.json (large file) (frequently changed)
./public/config/helpers.json | {fanin:0;fanout:0;depth:1;churn:151;loc:150;complexity:40;coverage:0} |  |  | No documentation available | public helpers.json (large file) (high complexity) (frequently changed)
./public/config/model-resolutions.json | {fanin:0;fanout:0;depth:1;churn:23;loc:14;complexity:1;coverage:0} |  |  | No documentation available | public model-resolutions.json
./public/config/shot-style-presets.json | {fanin:0;fanout:0;depth:1;churn:88;loc:73;complexity:1;coverage:0} |  |  | No documentation available | public shot-style-presets.json (frequently changed)
./public/config/style-presets.json | {fanin:0;fanout:0;depth:1;churn:2;loc:79;complexity:1;coverage:0} |  |  | No documentation available | public style-presets.json
./scripts/add-border-to-blanks.js | {fanin:0;fanout:2;depth:1;churn:0;loc:76;complexity:19;coverage:0} | →[@external:fs,@external:path] |  |  | scripts add-border-to-blanks.js
./scripts/add-border-to-blanks.py | {fanin:0;fanout:3;depth:1;churn:0;loc:63;complexity:5;coverage:0} | →[@external:PIL,@external:os,@external:Image] |  | No documentation available | scripts add-border-to-blanks.py
./scripts/coverage-to-intellimap.py | {fanin:0;fanout:6;depth:1;churn:0;loc:90;complexity:6;coverage:0} | →[@external:pathlib,@external:datetime,@external:json,@external:os,@external:subprocess,@external:Path] |  | No documentation available | scripts coverage-to-intellimap.py
./spark-intellishot-dev_docker-compose.yml | {fanin:0;fanout:0;depth:1;churn:0;loc:52;complexity:1;coverage:0} |  |  | No documentation available | root spark-intellishot-dev_docker-compose.yml
./spark-intellishot_docker-compose.yml | {fanin:0;fanout:0;depth:1;churn:2;loc:52;complexity:1;coverage:0} |  |  | No documentation available | root spark-intellishot_docker-compose.yml
./spark_users_rows.json | {fanin:0;fanout:0;depth:1;churn:0;loc:1;complexity:1;coverage:0} |  |  | No documentation available | root spark_users_rows.json (small file)
./src/App.tsx | {fanin:0;fanout:14;depth:1;churn:2139;loc:49;complexity:3;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/auth/SimpleKeycloakAuth.tsx,src/contexts/AppStateContext.tsx,src/components/Auth/LoadingScreen.tsx,src/components/Auth/LoginScreen.tsx,src/components/Header/Header.tsx,src/components/panels/LeftPanel.tsx,src/components/panels/CenterPanel.tsx,src/components/panels/RightPanel.tsx,src/components/viewer/ViewerModal.tsx,src/components/modals/GlobalModals.tsx,@external:React,@external:Header] | fn:[App] | IntelliShot App - Minimal wrapper */ | src App.tsx (frequently changed)
./src/api/fal.ts | {fanin:0;fanout:0;depth:1;churn:31;loc:76;complexity:28;coverage:0} |  | fn:[FluxKontextParams] | FAL / Flux / Kontext wrapper */ | src fal.ts (high complexity)
./src/api/openai.ts | {fanin:0;fanout:0;depth:1;churn:110;loc:103;complexity:30;coverage:0} |  | fn:[GPTImageParams] | OpenAI API wrappers via secure server proxy */ | src openai.ts (large file) (high complexity) (frequently changed)
./src/api/openrouter.ts | {fanin:0;fanout:0;depth:1;churn:6;loc:42;complexity:7;coverage:0} |  |  |  | src openrouter.ts
./src/api/useAuthorizedFetch.ts | {fanin:0;fanout:1;depth:1;churn:36;loc:88;complexity:18;coverage:0} | →[src/auth/SimpleKeycloakAuth.tsx] | fn:[useAuthorizedFetch,useAuthorizedAPI] |  | src useAuthorizedFetch.ts
./src/assets/pricing/fal.json | {fanin:0;fanout:0;depth:1;churn:8;loc:90;complexity:1;coverage:0} |  |  | No documentation available | src fal.json
./src/auth/CleanKeycloakAuth.tsx | {fanin:0;fanout:5;depth:1;churn:250;loc:563;complexity:70;coverage:0} | →[@external:react,@external:keycloak-js,@external:@supabase/supabase-js,@external:React,@external:Keycloak] | fn:[CleanKeycloakAuthProvider,useCleanAuth,useAuth,AuthContextType] |  | src CleanKeycloakAuth.tsx (large file) (high complexity) (frequently changed)
./src/auth/OLD_SimpleKeycloakAuth.tsx | {fanin:0;fanout:5;depth:1;churn:0;loc:796;complexity:139;coverage:0} | →[@external:react,@external:keycloak-js,@external:@supabase/supabase-js,@external:React,@external:Keycloak] | fn:[SimpleKeycloakAuthProvider,useSimpleAuth,useAuth,AuthContext] |  | src OLD_SimpleKeycloakAuth.tsx (large file) (high complexity)
./src/auth/SimpleKeycloakAuth.tsx | {fanin:0;fanout:7;depth:1;churn:2381;loc:953;complexity:187;coverage:0} | →[@external:react,@external:keycloak-js,@external:@supabase/supabase-js,src/keycloakService.ts,src/utils/sparkStorage.ts,@external:React,@external:Keycloak] | fn:[SimpleKeycloakAuthProvider,useSimpleAuth,useAuth,AuthContext] | Shared Keycloak instance (following the working RefactoredKeycloakAuthExample pattern) | src SimpleKeycloakAuth.tsx (large file) (high complexity) (frequently changed)
./src/auth/WorkingKeycloakAuth.tsx | {fanin:0;fanout:5;depth:1;churn:37;loc:496;complexity:84;coverage:0} | →[@external:react,@external:keycloak-js,@external:@supabase/supabase-js,@external:React,@external:Keycloak] | fn:[WorkingKeycloakAuthProvider,useWorkingAuth,AuthContext] |  | src WorkingKeycloakAuth.tsx (large file) (high complexity)
./src/auth/authorizedFetch.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:45;complexity:14;coverage:0} |  | fn:[authorizedFetch] |  | src authorizedFetch.ts
./src/auth/supabaseKeycloakClient.ts | {fanin:0;fanout:1;depth:1;churn:31;loc:88;complexity:26;coverage:0} | →[@external:@supabase/supabase-js] | fn:[createAuthenticatedSupabaseClient,updateSupabaseClient,getSupabaseClient] |  | src supabaseKeycloakClient.ts (high complexity)
./src/auth/useAuthorizedFetch.ts | {fanin:0;fanout:1;depth:1;churn:33;loc:90;complexity:19;coverage:0} | →[src/auth/SimpleKeycloakAuth.tsx] | fn:[useAuthorizedFetch,authorizedFetch] |  | src useAuthorizedFetch.ts
./src/components/Auth/LoadingScreen.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:11;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[LoadingScreen] | No documentation available | src LoadingScreen.tsx
./src/components/Auth/LoginScreen.tsx | {fanin:0;fanout:4;depth:1;churn:0;loc:22;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/keycloakService.ts,@external:React] | fn:[LoginScreen] | No documentation available | src LoginScreen.tsx
./src/components/ContentItemFileManager.tsx | {fanin:0;fanout:7;depth:1;churn:2;loc:384;complexity:43;coverage:0} | →[@external:react,@external:react-dropzone,src/auth/SimpleKeycloakAuth.tsx,src/utils/sparkStorage.ts,src/types/types.ts,@external:React,@external:type] | fn:[ContentItemFileManager,ContentItemFileManagerProps,FileUploadProgress] |  | src ContentItemFileManager.tsx (large file) (high complexity)
./src/components/DatabaseSetup.tsx | {fanin:0;fanout:4;depth:1;churn:0;loc:177;complexity:12;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/utils/setupDatabase.ts,@external:React] | fn:[DatabaseSetup] |  | src DatabaseSetup.tsx (large file)
./src/components/Header/Header.tsx | {fanin:0;fanout:7;depth:1;churn:393;loc:181;complexity:38;coverage:0} | →[@external:@chakra-ui/react,src/auth/SimpleKeycloakAuth.tsx,@external:react,intellistoryLogo.svg,src/utils/apiBase.ts,@external:React,@external:logo] |  | Fallback to alternate debug endpoint if present | src Header.tsx (large file) (high complexity) (frequently changed)
./src/components/MainCanvas/MainCanvas.tsx | {fanin:0;fanout:4;depth:1;churn:0;loc:145;complexity:7;coverage:0} | →[@external:@chakra-ui/react,@external:react-redux,src/store/store.ts,src/store/slices/generationSlice.ts] |  |  | src MainCanvas.tsx (large file)
./src/components/ProjectNumberManager.jsx | {fanin:0;fanout:4;depth:1;churn:110;loc:249;complexity:30;coverage:0} | →[@external:react,src/lib/supabase.ts,src/utils/projectNumberManager.js,@external:React] |  | Load projects from Spark storage | src ProjectNumberManager.jsx (large file) (high complexity) (frequently changed)
./src/components/ReferenceImages/ReferenceImageItem.tsx | {fanin:0;fanout:8;depth:1;churn:0;loc:269;complexity:22;coverage:0} | →[@external:@chakra-ui/react,@external:react,@external:react-dropzone,@external:react-redux,@external:react-icons/md,src/store/slices/referenceImagesSlice.ts,@external:@dnd-kit/sortable,@external:@dnd-kit/utilities] | fn:[ReferenceImageItemProps] |  | src ReferenceImageItem.tsx (large file) (high complexity)
./src/components/ReferenceImages/ReferenceImagesList.tsx | {fanin:0;fanout:8;depth:1;churn:0;loc:67;complexity:7;coverage:0} | →[@external:@chakra-ui/react,@external:react-redux,src/store/store.ts,src/components/ReferenceImages/ReferenceImageItem.tsx,src/store/slices/referenceImagesSlice.ts,@external:@dnd-kit/core,@external:@dnd-kit/sortable,@external:ReferenceImageItem] |  |  | src ReferenceImagesList.tsx
./src/components/RightPanel/RightPanel.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:183;complexity:12;coverage:0} | →[@external:@chakra-ui/react,@external:react-redux,src/store/store.ts] |  |  | src RightPanel.tsx (large file)
./src/components/Sidebar/Sidebar.tsx | {fanin:0;fanout:7;depth:1;churn:4;loc:173;complexity:4;coverage:0} | →[@external:@chakra-ui/react,@external:react-redux,src/store/store.ts,src/store/slices/generationSlice.ts,src/store/slices/referenceImagesSlice.ts,src/components/ReferenceImages/ReferenceImagesList.tsx,@external:ReferenceImagesList] |  |  | src Sidebar.tsx (large file)
./src/components/StateTest.tsx | {fanin:0;fanout:3;depth:1;churn:9;loc:298;complexity:4;coverage:0} | →[@external:react,src/auth/SimpleKeycloakAuth.tsx,@external:React] | fn:[StateTest] |  | src StateTest.tsx (large file)
./src/components/UploadManager.tsx | {fanin:0;fanout:9;depth:1;churn:0;loc:326;complexity:26;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-dropzone,@external:react-icons/md,src/hooks/useFileUpload.ts,src/hooks/useSupabaseData.ts,src/types/types.ts,@external:React,@external:type] | fn:[UploadManager,UploadManagerProps] |  | src UploadManager.tsx (large file) (high complexity)
./src/components/assets/AssetsPanel.tsx | {fanin:0;fanout:3;depth:1;churn:2;loc:135;complexity:8;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[AssetsPanel,AssetImage,AssetsPanelProps] |  | src AssetsPanel.tsx (large file)
./src/components/canvas/CanvasAdjustmentsPanel.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:128;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[Levels,HSL,CanvasAdjustmentsPanelProps] | No documentation available | src CanvasAdjustmentsPanel.tsx (large file)
./src/components/canvas/CanvasPropertiesPanel.tsx | {fanin:0;fanout:3;depth:1;churn:6;loc:141;complexity:2;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[DrawingMode,CanvasPropertiesPanelProps] | No documentation available | src CanvasPropertiesPanel.tsx (large file)
./src/components/canvas/CanvasToolbox.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:61;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[CanvasToolboxProps] | No documentation available | src CanvasToolbox.tsx
./src/components/canvas/CanvasView.tsx | {fanin:0;fanout:2;depth:1;churn:0;loc:47;complexity:1;coverage:0} | →[@external:react,@external:React] | fn:[CanvasViewProps] | No documentation available | src CanvasView.tsx
./src/components/canvas/DrawingCanvas.tsx | {fanin:0;fanout:6;depth:1;churn:1968;loc:933;complexity:248;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/md,src/lib/config.ts,@external:React,@external:type] | fn:[DrawingImage,DrawingBounds,Point,LevelsAdjustment,HSLAdjustment] |  | src DrawingCanvas.tsx (large file) (high complexity) (frequently changed)
./src/components/common/ErrorBoundary.tsx | {fanin:0;fanout:2;depth:1;churn:0;loc:42;complexity:4;coverage:0} | →[@external:react,@external:React] | fn:[Props,State] | No documentation available | src ErrorBoundary.tsx
./src/components/helpers/HelperControls.tsx | {fanin:0;fanout:11;depth:1;churn:126;loc:122;complexity:38;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/md,src/helpers/catalog.ts,src/helpers/types.ts,src/helpers/assemble.ts,src/components/helpers/InfoModal.tsx,src/helpers/telemetry.ts,@external:React,@external:type,@external:InfoModal] | fn:[HelperControlsProps] | Keep in sync if parent passes selectedHelperId | src HelperControls.tsx (large file) (high complexity) (frequently changed)
./src/components/helpers/InfoModal.tsx | {fanin:0;fanout:6;depth:1;churn:220;loc:120;complexity:20;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/helpers/types.ts,src/helpers/assemble.ts,@external:React,@external:type] | fn:[InfoModalProps] | Fallback assembler that tolerates missing required refs (no numbered preamble, no \{S\}) | src InfoModal.tsx (large file) (frequently changed)
./src/components/helpers/PreviewPane.tsx | {fanin:0;fanout:6;depth:1;churn:22;loc:46;complexity:4;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/helpers/types.ts,src/helpers/assemble.ts,@external:React,@external:type] | fn:[PreviewPaneProps] | No documentation available | src PreviewPane.tsx
./src/components/history/BatchGenerationExample.tsx | {fanin:0;fanout:7;depth:1;churn:0;loc:191;complexity:16;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/components/history/GenerationHistoryPanelV2.tsx,src/types/types.ts,@external:React,@external:GenerationHistoryPanelV2,@external:type] |  | Example component showing how to integrate the batch system | src BatchGenerationExample.tsx (large file)
./src/components/history/GenerationBatchHistoryList.tsx | {fanin:0;fanout:8;depth:1;churn:0;loc:152;complexity:41;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/components/history/GenerationBatchTile.tsx,src/types/types.ts,src/config/pricing.ts,@external:React,@external:GenerationBatchTile,@external:type] | fn:[GenerationBatchHistoryListProps] | Compute total spend from visible batches using centralized pricing | src GenerationBatchHistoryList.tsx (large file) (high complexity)
./src/components/history/GenerationBatchTile.tsx | {fanin:0;fanout:9;depth:1;churn:1964;loc:1384;complexity:384;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/config/pricing.ts,@external:react-icons/md,src/types/types.ts,src/assets/progress-movie-128.mp4,@external:React,@external:type,@external:progressMovie128] | fn:[GenerationBatchTileProps] | Component for image viewing with thumbnail optimization | src GenerationBatchTile.tsx (large file) (high complexity) (frequently changed)
./src/components/history/GenerationHistoryFilters.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:236;complexity:8;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[GenerationHistoryFiltersProps] | New filters | src GenerationHistoryFilters.tsx (large file)
./src/components/history/GenerationHistoryList.tsx | {fanin:0;fanout:4;depth:1;churn:843;loc:486;complexity:148;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/md,@external:React] | fn:[GenerationHistoryItem,GenerationHistoryListProps] | Compute total spend from visible items (prefer millicents) | src GenerationHistoryList.tsx (large file) (high complexity) (frequently changed)
./src/components/history/GenerationHistoryPanelV2.tsx | {fanin:0;fanout:12;depth:1;churn:0;loc:341;complexity:34;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/components/history/GenerationBatchHistoryList.tsx,src/components/history/GenerationHistoryList.tsx,src/components/history/GenerationHistoryFilters.tsx,src/hooks/useGenerationBatches.ts,src/types/types.ts,@external:React,@external:GenerationBatchHistoryList,@external:GenerationHistoryList,@external:GenerationHistoryFilters,@external:type] | fn:[GenerationHistoryPanelV2Props,GenerationHistoryPanelV2Ref] | Same props as original HistoryPanel but with batch support | src GenerationHistoryPanelV2.tsx (large file) (high complexity)
./src/components/history/HistoryPanel.tsx | {fanin:0;fanout:12;depth:1;churn:1392;loc:1016;complexity:251;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/components/history/ImageFiltersPanel.tsx,src/components/history/GenerationBatchHistoryList.tsx,src/types/types.ts,src/components/common/ErrorBoundary.tsx,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:React,@external:ImageFiltersPanel,@external:GenerationBatchHistoryList,@external:type,@external:ErrorBoundary] | fn:[HistoryPanel,HistoryPanelProps] |  | src HistoryPanel.tsx (large file) (high complexity) (frequently changed)
./src/components/history/ImageFiltersPanel.tsx | {fanin:0;fanout:16;depth:1;churn:161;loc:234;complexity:5;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/md,src/modules/metadata-panel/selectors/TeamSelect.tsx,src/modules/metadata-panel/selectors/ProjectSelect.tsx,src/modules/metadata-panel/selectors/SequenceSelect.tsx,src/modules/metadata-panel/selectors/ShotSelect.tsx,src/modules/metadata-panel/selectors/CharacterSelect.tsx,src/modules/metadata-panel/selectors/VariantSelect.tsx,src/modules/metadata-panel/selectors/AssetTypeSelect.tsx,src/modules/metadata-panel/selectors/AssetSelect.tsx,src/modules/metadata-panel/selectors/DepartmentSelect.tsx,src/modules/metadata-panel/selectors/TaskSelect.tsx,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:React,@external:type] | fn:[ImageFiltersPanelProps,ImageFiltersPanel] | Header tab | src ImageFiltersPanel.tsx (large file) (frequently changed)
./src/components/layout/AnalysisControls.tsx | {fanin:0;fanout:3;depth:1;churn:4;loc:23;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[AnalysisControlsProps] |  | src AnalysisControls.tsx
./src/components/layout/CenterPanel.tsx | {fanin:0;fanout:11;depth:1;churn:4;loc:119;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/components/canvas/CanvasView.tsx,src/components/canvas/CanvasToolbox.tsx,src/components/canvas/CanvasPropertiesPanel.tsx,src/components/canvas/CanvasAdjustmentsPanel.tsx,@external:React,@external:CanvasView,@external:CanvasToolbox,@external:CanvasPropertiesPanel,@external:CanvasAdjustmentsPanel] | fn:[CenterPanelProps] |  | src CenterPanel.tsx (large file)
./src/components/layout/GeneratedImagePanel.tsx | {fanin:0;fanout:4;depth:1;churn:24;loc:179;complexity:19;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/md,@external:React] | fn:[GeneratedImagePanelProps] |  | src GeneratedImagePanel.tsx (large file)
./src/components/layout/ImageSettingsPanel.tsx | {fanin:0;fanout:3;depth:1;churn:227;loc:180;complexity:3;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[ImageSettingsPanelProps] |  | src ImageSettingsPanel.tsx (large file) (frequently changed)
./src/components/layout/Layout.tsx | {fanin:0;fanout:9;depth:1;churn:0;loc:23;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/components/Header/Header.tsx,src/components/panels/LeftPanel.tsx,src/components/panels/CenterPanel.tsx,src/components/panels/RightPanel.tsx,src/components/Modals/GlobalModals,@external:React,@external:Header] | fn:[Layout] | No documentation available | src Layout.tsx
./src/components/layout/LeftPanel.tsx | {fanin:0;fanout:8;depth:1;churn:89;loc:166;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/md,src/types/types.ts,src/components/reference/ReferenceImagesPanel.tsx,@external:React,@external:type,@external:ReferenceImagesPanel] | fn:[LeftPanelProps] |  | src LeftPanel.tsx (large file) (frequently changed)
./src/components/layout/MainLeftPanel.tsx | {fanin:0;fanout:8;depth:1;churn:4;loc:414;complexity:10;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/md,src/types/types.ts,src/components/reference/ReferenceImagesPanel.tsx,@external:React,@external:type,@external:ReferenceImagesPanel] | fn:[MainLeftPanel,MainLeftPanelProps] |  | src MainLeftPanel.tsx (large file)
./src/components/layout/RightPanel.tsx | {fanin:0;fanout:3;depth:1;churn:10;loc:52;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[RightPanelProps] |  | src RightPanel.tsx
./src/components/logs/LogsPanel.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:111;complexity:10;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[LogsPanel,LogEntry,LogsPanelProps] |  | src LogsPanel.tsx (large file)
./src/components/logs/index.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:2;complexity:1;coverage:0} |  | fn:[LogsPanel] | No documentation available | src index.ts (small file)
./src/components/modals/CreateAssetModal.tsx | {fanin:0;fanout:3;depth:1;churn:404;loc:361;complexity:30;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[CreateAssetModal,CreateAssetModalProps] | Reset defaults each time the modal opens | src CreateAssetModal.tsx (large file) (high complexity) (frequently changed)
./src/components/modals/CreateAssetTypeModal.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:115;complexity:12;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[CreateAssetTypeModalProps,CreateAssetTypeModal] | No documentation available | src CreateAssetTypeModal.tsx (large file)
./src/components/modals/CreateDepartmentModal.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:88;complexity:12;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[CreateDepartmentModalProps,CreateDepartmentModal] | No documentation available | src CreateDepartmentModal.tsx
./src/components/modals/CreateProjectModal.tsx | {fanin:0;fanout:4;depth:1;churn:0;loc:223;complexity:31;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/io5,@external:React] | fn:[CreateProjectModal,CreateProjectModalProps] | Clear any previous messages | src CreateProjectModal.tsx (large file) (high complexity)
./src/components/modals/CreateSequenceModal.tsx | {fanin:0;fanout:3;depth:1;churn:20;loc:237;complexity:22;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[CreateSequenceModal,CreateSequenceModalProps] | Auto-suggest next sequence number | src CreateSequenceModal.tsx (large file) (high complexity)
./src/components/modals/CreateShotModal.tsx | {fanin:0;fanout:3;depth:1;churn:4;loc:345;complexity:48;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[CreateShotModal,CreateShotModalProps] | Auto-select the current sequence when modal opens | src CreateShotModal.tsx (large file) (high complexity)
./src/components/modals/CreateTaskModal.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:89;complexity:13;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[CreateTaskModalProps,CreateTaskModal] | No documentation available | src CreateTaskModal.tsx
./src/components/modals/CreateVariantModal.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:117;complexity:6;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[CreateVariantModal,CreateVariantModalProps] | No documentation available | src CreateVariantModal.tsx (large file)
./src/components/modals/DevLoginModal.tsx | {fanin:0;fanout:4;depth:1;churn:0;loc:214;complexity:11;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/io5,@external:React] | fn:[DevLoginModal,DevLoginModalProps] | No documentation available | src DevLoginModal.tsx (large file)
./src/components/modals/DrawingAnnotationModal.tsx | {fanin:0;fanout:5;depth:1;churn:13;loc:102;complexity:16;coverage:0} | →[@external:react,src/components/canvas/DrawingCanvas.tsx,src/types/types.ts,@external:React,@external:type] | fn:[DrawingAnnotationModal,DrawingImage,AssetImage,DrawingAnnotationModalProps] |  | src DrawingAnnotationModal.tsx (large file)
./src/components/modals/GlobalModals.tsx | {fanin:0;fanout:8;depth:1;churn:43;loc:55;complexity:4;coverage:0} | →[@external:react,src/components/modals/ImageEnlargementModal.tsx,src/components/modals/DrawingAnnotationModal.tsx,src/modules/model-docs/ModelDocsModal.tsx,src/modules/ingest/IngestManager.tsx,src/components/modals/GraphAPITestModal.tsx,src/components/modals/MetadataDebugModal.tsx,@external:React] | fn:[GlobalModals] | Add global keyboard shortcuts | src GlobalModals.tsx
./src/components/modals/GraphAPITestModal.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:224;complexity:29;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[GraphAPITestModal,GraphAPITestModalProps,TestResult] | No documentation available | src GraphAPITestModal.tsx (large file) (high complexity)
./src/components/modals/ImageEnlargementModal.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:64;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[ImageEnlargementModal,EnlargedImage,ImageEnlargementModalProps] |  | src ImageEnlargementModal.tsx
./src/components/modals/LoadingStatusModal.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:247;complexity:26;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[LoadingStatusModal,useLoadingStatus,LoadingStep,LoadingStatusModalProps] |  | src LoadingStatusModal.tsx (large file) (high complexity)
./src/components/modals/MetadataDebugModal.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:195;complexity:16;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[MetadataDebugModal,MetadataDebugModalProps] | No documentation available | src MetadataDebugModal.tsx (large file)
./src/components/modals/ProjectRequiredModal.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:101;complexity:2;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[ProjectRequiredModal,ProjectRequiredModalProps] |  | src ProjectRequiredModal.tsx (large file)
./src/components/panels/AnalysisEnhancementPanel.tsx | {fanin:0;fanout:3;depth:1;churn:251;loc:173;complexity:3;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[AnalysisEnhancementPanel,ReferenceImage,AnalysisEnhancementPanelProps] |  | src AnalysisEnhancementPanel.tsx (large file) (frequently changed)
./src/components/panels/AssembledPromptPanel.tsx | {fanin:0;fanout:3;depth:1;churn:518;loc:86;complexity:5;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[AssembledPromptPanel,AssembledPromptPanelProps] |  | src AssembledPromptPanel.tsx (frequently changed)
./src/components/panels/CanvasPanel.tsx | {fanin:0;fanout:5;depth:1;churn:967;loc:698;complexity:194;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/md,src/components/viewer/ViewerModal.tsx,@external:React] | fn:[CanvasPanel,ImageMetadata,UpscaleSettings,CanvasPanelProps] |  | src CanvasPanel.tsx (large file) (high complexity) (frequently changed)
./src/components/panels/CenterPanel.tsx | {fanin:0;fanout:18;depth:1;churn:2561;loc:1561;complexity:514;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/components/settings/ImageSettingsPanel.tsx,src/contexts/AppStateContext.tsx,src/components/panels/CanvasPanel.tsx,src/components/panels/StatusBarPanel.tsx,src/components/ui/HorizontalSplit.tsx,src/components/ui/VerticalSplit.tsx,src/components/canvas/DrawingCanvas.tsx,src/utils/vault/referenceVault.ts,src/types/types.ts,src/hooks/useGeneration.ts,src/hooks/useProjectMetadata.ts,src/hooks/useTopazUpscale.ts,src/components/modals/ProjectRequiredModal.tsx,src/utils/sparkStorage.ts,@external:React,@external:type] | fn:[CenterPanel,LocalReferenceImage,ImageMetadata,UpscaleSettings,CenterPanelProps] |  | src CenterPanel.tsx (large file) (high complexity) (frequently changed)
./src/components/panels/LeftPanel.tsx | {fanin:0;fanout:29;depth:1;churn:2978;loc:2243;complexity:615;coverage:0} | →[@external:react,src/utils/apiBase.ts,@external:@chakra-ui/react,@external:react-icons/md,src/services/sessionService.ts,src/contexts/AppStateContext.tsx,src/components/panels/ModelsPanel.tsx,src/components/panels/AnalysisEnhancementPanel.tsx,src/components/panels/PromptsPanel.tsx,src/components/settings/AdvancedSettingsPanel.tsx,src/components/prompt/SceneDescriptionInput.tsx,src/components/helpers/HelperControls.tsx,src/modules/metadata-panel/MetadataPanel.tsx,src/components/panels/ProjectMetadataPanel.tsx,src/modules/metadata-panel/contexts/MetadataContext.tsx,src/helpers/types.ts,src/components/reference/ReferenceImagesPanel.tsx,src/components/reference/ReferenceGuidanceIndicator.tsx,src/helpers/catalog.ts,src/helpers/assemble.ts,src/utils/vault/index.ts,src/utils/sparkStorage.ts,src/utils/imageUtils.ts,src/services/openrouterService.ts,@external:React,@external:type,@external:HelperControls,@external:ReferenceImagesPanel,@external:ReferenceGuidanceIndicator] | fn:[LeftPanel,labelFromKey,ReferenceImage,LoRAModel,LeftPanelProps] |  | src LeftPanel.tsx (large file) (high complexity) (frequently changed)
./src/components/panels/ModelsPanel.tsx | {fanin:0;fanout:6;depth:1;churn:1019;loc:451;complexity:100;coverage:0} | →[@external:react,src/promptEngine/capabilities.ts,@external:@chakra-ui/react,@external:react-icons/fi,@external:react-icons/md,@external:React] | fn:[ModelsPanel,ModelsPanelProps] |  | src ModelsPanel.tsx (large file) (high complexity) (frequently changed)
./src/components/panels/ProjectMetadataPanel.tsx | {fanin:0;fanout:18;depth:1;churn:3370;loc:3197;complexity:615;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/auth/SimpleKeycloakAuth.tsx,src/lib/supabase.ts,src/components/modals/LoadingStatusModal.tsx,src/components/modals/CreateSequenceModal.tsx,src/components/modals/CreateShotModal.tsx,src/components/modals/CreateProjectModal.tsx,src/components/modals/CreateAssetModal.tsx,@external:react-icons/io5,src/utils/projectMetadata.ts,src/utils/sparkStorage.ts,@external:react-markdown,src/components/modals/CreateVariantModal.tsx,src/utils/apiBase.ts,src/utils/fetchWithAuth.ts,@external:React,@external:ReactMarkdown] | fn:[ProjectMetadataPanel,ProjectMetadataPanelProps] |  | src ProjectMetadataPanel.tsx (large file) (high complexity) (frequently changed)
./src/components/panels/PromptsPanel.tsx | {fanin:0;fanout:4;depth:1;churn:406;loc:320;complexity:66;coverage:0} | →[@external:@chakra-ui/react,@external:react,src/helpers/catalog.ts,@external:React] | fn:[PromptsPanel,PromptsPanelProps] |  | src PromptsPanel.tsx (large file) (high complexity) (frequently changed)
./src/components/panels/RightPanel.tsx | {fanin:0;fanout:21;depth:1;churn:2761;loc:1924;complexity:627;coverage:0} | →[@external:react,@external:react-dom,@external:@chakra-ui/react,src/components/viewer/ViewerModal.tsx,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:react-icons/md,src/components/history/HistoryPanel.tsx,src/components/history/ImageFiltersPanel.tsx,src/components/assets/AssetsPanel.tsx,src/auth/useAuthorizedFetch.ts,src/modules/metadata-panel/services/projects.ts,src/modules/metadata-panel/services/shots.ts,src/modules/metadata-panel/services/characters.ts,src/modules/metadata-panel/services/assets.ts,src/modules/metadata-panel/services/departments.ts,src/components/logs/index.ts,src/hooks/useLog.ts,src/hooks/useGenerationHistory.ts,@external:React,@external:type,@external:ImageFiltersPanel] | fn:[RightPanel,AssetImage,GenerationQueueItem,RightPanelProps] |  | src RightPanel.tsx (large file) (high complexity) (frequently changed)
./src/components/panels/SlidingPane.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:29;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[SlidingPane,SlidingPaneProps] | Minimal sliding container to make the area below the TAB buttons appear to slide. | src SlidingPane.tsx
./src/components/panels/StatusBarPanel.tsx | {fanin:0;fanout:3;depth:1;churn:4;loc:35;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[StatusBarPanel,StatusBarPanelProps] |  | src StatusBarPanel.tsx
./src/components/prompt/SceneDescriptionInput.tsx | {fanin:0;fanout:3;depth:1;churn:39;loc:44;complexity:2;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[SceneDescriptionInput,SceneDescriptionInputProps] |  | src SceneDescriptionInput.tsx
./src/components/queue/QueuePanel.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:123;complexity:11;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[QueuePanel,QueueItem,QueuePanelProps] |  | src QueuePanel.tsx (large file)
./src/components/reference/AddReferenceButton.tsx | {fanin:0;fanout:5;depth:1;churn:0;loc:68;complexity:6;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-dropzone,@external:react-icons/md,@external:React] | fn:[AddReferenceButton,AddReferenceButtonProps] |  | src AddReferenceButton.tsx
./src/components/reference/ReferenceGuidanceIndicator.tsx | {fanin:0;fanout:5;depth:1;churn:0;loc:68;complexity:18;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/types/types.ts,@external:React,@external:type] | fn:[RefWeight,ReferenceGuidanceIndicatorProps] | No documentation available | src ReferenceGuidanceIndicator.tsx
./src/components/reference/ReferenceImageTile.tsx | {fanin:0;fanout:10;depth:1;churn:10;loc:292;complexity:21;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-dropzone,@external:@dnd-kit/sortable,@external:@dnd-kit/utilities,@external:react-icons/md,src/lib/config.ts,src/types/types.ts,@external:React,@external:type] | fn:[ReferenceImageTile,ReferenceImageTileProps] |  | src ReferenceImageTile.tsx (large file) (high complexity)
./src/components/reference/ReferenceImagesPanel.tsx | {fanin:0;fanout:11;depth:1;churn:646;loc:553;complexity:173;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:@dnd-kit/core,@external:@dnd-kit/sortable,@external:react-dropzone,@external:@dnd-kit/utilities,@external:react-icons/md,src/components/viewer/ViewerModal.tsx,src/types/types.ts,@external:React,@external:type] | fn:[RefWeight,ReferenceImagesPanelProps,SortableReferenceImageTile,ReferenceImageTile] | Internal drag visual state (for canvas/history drags that aren't files) | src ReferenceImagesPanel.tsx (large file) (high complexity) (frequently changed)
./src/components/references/handlers/externalFileDrop.ts | {fanin:0;fanout:4;depth:1;churn:0;loc:210;complexity:35;coverage:0} | →[src/utils/vault/referenceVault.ts,src/utils/metadata/imageMetadataExtract.ts,src/types/types.ts,@external:type] | fn:[ExternalFileDropParams,ExternalFileDropResult,isSupportedImageFile,isValidFileSize] |  | src externalFileDrop.ts (large file) (high complexity)
./src/components/references/handlers/generationDrop.ts | {fanin:0;fanout:4;depth:1;churn:0;loc:181;complexity:18;coverage:0} | →[src/utils/vault/referenceVault.ts,src/utils/vault/vaultTypes.ts,src/types/types.ts,@external:type] | fn:[GenerationDropParams,GenerationDropResult] |  | src generationDrop.ts (large file)
./src/components/references/handlers/index.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:25;complexity:1;coverage:0} |  | fn:[handleGenerationDrop,extractGenerationMetadata,type GenerationDropParams,type GenerationDropResult,handleExternalFileDrop] |  | src index.ts
./src/components/settings/AdvancedSettingsPanel.tsx | {fanin:0;fanout:4;depth:1;churn:119;loc:336;complexity:15;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/md,@external:React] | fn:[AdvancedSettingsPanel,LoRAModel,AdvancedSettingsPanelProps] |  | src AdvancedSettingsPanel.tsx (large file) (frequently changed)
./src/components/settings/FalSettingsPanel.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:58;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[FalSettingsPanel,FalSettingsPanelProps] |  | src FalSettingsPanel.tsx
./src/components/settings/ImageSettingsPanel.tsx | {fanin:0;fanout:8;depth:1;churn:2702;loc:1405;complexity:349;coverage:0} | →[@external:react,src/promptEngine/sizeResolver.ts,src/promptEngine/adapter.ts,src/promptEngine/validator.ts,src/promptEngine/renderers/router.ts,@external:@chakra-ui/react,@external:react-icons/fi,@external:React] | fn:[ImageSettingsPanel,ReferenceImage,ImageSettingsPanelProps] |  | src ImageSettingsPanel.tsx (large file) (high complexity) (frequently changed)
./src/components/ui/HorizontalSplit.tsx | {fanin:0;fanout:3;depth:1;churn:0;loc:74;complexity:10;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[HorizontalSplit,HorizontalSplitProps] | No documentation available | src HorizontalSplit.tsx
./src/components/ui/VerticalSplit.tsx | {fanin:0;fanout:3;depth:1;churn:2;loc:67;complexity:8;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:React] | fn:[VerticalSplit,VerticalSplitProps] | No documentation available | src VerticalSplit.tsx
./src/components/viewer/ViewerModal.tsx | {fanin:0;fanout:4;depth:1;churn:40;loc:250;complexity:86;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/md,@external:React] | fn:[ViewerItem,ViewerModalContext,useViewerModal,ViewerProvider,ViewerProviderProps] | Try /api/spark-file?path=...thumbs/... .webp | src ViewerModal.tsx (large file) (high complexity)
./src/config/falPricingClient.ts | {fanin:0;fanout:2;depth:1;churn:71;loc:77;complexity:33;coverage:0} | →[src/assets/pricing/fal.json,@external:pricingJson] | fn:[getFalPricingForModel,estimateFalCostCents,PricingRow,normalizeModelKey,ensureLoadedFromJson] | Client-side FAL pricing loader using JSON bundled with the app | src falPricingClient.ts (high complexity) (frequently changed)
./src/config/features.js | {fanin:0;fanout:0;depth:1;churn:49;loc:68;complexity:21;coverage:0} |  | fn:[isEnabled,getAllFeatures,featureFlags] | Feature flags configuration for IntelliShot (Node + browser) | src features.js (high complexity)
./src/config/pricing.ts | {fanin:0;fanout:1;depth:1;churn:77;loc:104;complexity:21;coverage:0} | →[src/config/falPricingClient.ts] | fn:[PRICING,ProviderKey,ModelPricing,ProviderPricing,PricingConfig] | Pricing configuration for generation billing | src pricing.ts (large file) (high complexity) (frequently changed)
./src/contexts/AppStateContext.tsx | {fanin:0;fanout:2;depth:1;churn:0;loc:106;complexity:13;coverage:0} | →[@external:react,@external:React] | fn:[AppState,AppStateProvider,useAppState,AppAction,appStateReducer] | Minimal initial scaffolding; we will expand this gradually during refactor | src AppStateContext.tsx (large file)
./src/contexts/AuthContext.tsx | {fanin:0;fanout:9;depth:1;churn:0;loc:349;complexity:13;coverage:0} | →[@external:react,src/hooks/useSparkAuth.ts,src/hooks/useSupabaseData.ts,src/utils/sparkStorage.ts,src/hooks/useAppState.ts,src/types/types.ts,@external:@supabase/supabase-js,@external:React,@external:type] | fn:[AuthProvider,useAuth,AuthContextType,AuthProviderProps,AuthContext] |  | src AuthContext.tsx (large file)
./src/examples/MetadataPanelIntegration.jsx | {fanin:0;fanout:3;depth:1;churn:0;loc:162;complexity:21;coverage:0} | →[@external:react,src/utils/projectNumberManager.js,@external:React] | fn:[useProjectNumber,createGenerationMetadata] | Example integration with your metadata panel | src MetadataPanelIntegration.jsx (large file) (high complexity)
./src/helpers/assemble.ts | {fanin:0;fanout:4;depth:1;churn:41;loc:64;complexity:24;coverage:0} | →[src/helpers/types.ts,src/helpers/strength.ts,src/helpers/labels.ts,@external:type] | fn:[RefBind,RefsMap,buildNumberedPreamble,assemblePrompt,indexOfRef] | validate required | src assemble.ts (high complexity)
./src/helpers/catalog.ts | {fanin:0;fanout:2;depth:1;churn:6;loc:22;complexity:8;coverage:0} | →[src/helpers/types.ts,@external:type] | fn:[clearCatalogCache] | Prefer public/config for static serving; fallback to /config for dev | src catalog.ts
./src/helpers/labels.ts | {fanin:0;fanout:2;depth:1;churn:0;loc:24;complexity:10;coverage:0} | →[src/helpers/types.ts,@external:type] | fn:[normalizeLabel,orderRefKeys] | direct match | src labels.ts
./src/helpers/strength.ts | {fanin:0;fanout:2;depth:1;churn:0;loc:7;complexity:1;coverage:0} | →[src/helpers/types.ts,@external:type] | fn:[strengthPhrase] | No documentation available | src strength.ts (small file)
./src/helpers/telemetry.ts | {fanin:0;fanout:0;depth:1;churn:17;loc:43;complexity:8;coverage:0} |  | fn:[telemetry,HelperEventType,HelperEvent,push] | Deduplicate identical helper_select events to prevent loops/spam | src telemetry.ts
./src/helpers/types.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:24;complexity:1;coverage:0} |  | fn:[Strength,RefKey,Helper,Catalog] | No documentation available | src types.ts
./src/hooks/useAppState.ts | {fanin:0;fanout:3;depth:1;churn:0;loc:338;complexity:38;coverage:0} | →[@external:react,@external:@supabase/supabase-js,@external:issues] | fn:[AppState,useAppState,GenerationModel,ReferenceWeight,UseAppStateReturn] |  | src useAppState.ts (large file) (high complexity)
./src/hooks/useCanvasController.ts | {fanin:0;fanout:3;depth:1;churn:0;loc:221;complexity:74;coverage:0} | →[@external:react,src/utils/canvasRenderer.ts,src/utils/canvasShapes.ts] | fn:[DrawingMode,UseCanvasControllerArgs,useCanvasController] | Reset | src useCanvasController.ts (large file) (high complexity)
./src/hooks/useFileUpload.ts | {fanin:0;fanout:5;depth:1;churn:0;loc:128;complexity:28;coverage:0} | →[@external:react,src/lib/webdavClient.ts,src/types/types.ts,src/hooks/useSupabaseData.ts,@external:type] | fn:[UploadProgressEntry,useFileUpload,UploadOptions] |  | src useFileUpload.ts (large file) (high complexity)
./src/hooks/useGeneration.ts | {fanin:0;fanout:15;depth:1;churn:1996;loc:1672;complexity:622;coverage:0} | →[@external:react,src/contexts/AppStateContext.tsx,src/services/falService.ts,src/services/openaiService.ts,src/utils/imageUtils.ts,src/types/types.ts,src/promptEngine/adapter.ts,src/promptEngine/validator.ts,src/promptEngine/sizeResolver.ts,src/promptEngine/renderers/router.ts,src/promptEngine/compliance.ts,src/promptEngine/audit.ts,src/promptEngine/capabilities.ts,src/helpers/telemetry.ts,@external:type] | fn:[useGeneration,GenerationSettings,UseGenerationProps,UseGenerationReturn] |  | src useGeneration.ts (large file) (high complexity) (frequently changed)
./src/hooks/useGenerationBatches.ts | {fanin:0;fanout:3;depth:1;churn:11;loc:444;complexity:87;coverage:0} | →[@external:react,src/types/types.ts,@external:type] | fn:[useGenerationBatches,UseGenerationBatchesProps,UseGenerationBatchesReturn] |  | src useGenerationBatches.ts (large file) (high complexity)
./src/hooks/useGenerationHistory.ts | {fanin:0;fanout:7;depth:1;churn:2914;loc:1589;complexity:501;coverage:0} | →[@external:react,src/types/types.ts,src/lib/supabase.ts,src/config/pricing.ts,src/config/features.js,@external:type,@external:features] | fn:[useGenerationHistory,GenerationHistoryItem,GenerationQueueItem,UseGenerationHistoryProps,UseGenerationHistoryReturn] |  | src useGenerationHistory.ts (large file) (high complexity) (frequently changed)
./src/hooks/useGenerationLogic.ts | {fanin:0;fanout:1;depth:1;churn:0;loc:16;complexity:4;coverage:0} | →[@external:react] | fn:[useGenerationLogic] | Skeleton for later migration of generation-related logic from App.tsx | src useGenerationLogic.ts
./src/hooks/useImageAnalysis.ts | {fanin:0;fanout:6;depth:1;churn:10;loc:140;complexity:43;coverage:0} | →[@external:react,src/hooks/useReferenceImages.ts,src/utils/imageUtils.ts,src/services/openrouterService.ts,src/api/openai.ts,@external:type] | fn:[UseImageAnalysisArgs,useImageAnalysis] | Use OpenAI server proxy for GPT-5 vision analysis | src useImageAnalysis.ts (large file) (high complexity)
./src/hooks/useImageProcessing.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:7;complexity:3;coverage:0} |  | fn:[useImageProcessing] | Placeholder for image processing related hooks | src useImageProcessing.ts (small file)
./src/hooks/useLog.ts | {fanin:0;fanout:3;depth:1;churn:26;loc:89;complexity:22;coverage:0} | →[@external:react,src/types/types.ts,@external:type] | fn:[LogEntry,UseLogReturn,useLog] |  | src useLog.ts (high complexity)
./src/hooks/useProjectMetadata.ts | {fanin:0;fanout:4;depth:1;churn:149;loc:356;complexity:65;coverage:0} | →[@external:react,src/types/types.ts,src/auth/SimpleKeycloakAuth.tsx,@external:type] | fn:[ProjectMetadata,UseProjectMetadataReturn,useProjectMetadata,UseProjectMetadataProps] |  | src useProjectMetadata.ts (large file) (high complexity) (frequently changed)
./src/hooks/useReferenceImages.ts | {fanin:0;fanout:4;depth:1;churn:28;loc:118;complexity:33;coverage:0} | →[@external:react,@external:@dnd-kit/sortable,src/types/types.ts,@external:type] | fn:[UseReferenceImagesArgs,useReferenceImages] | If the underlying image changed, drop any cached processedUrl so we re-convert | src useReferenceImages.ts (large file) (high complexity)
./src/hooks/useSettingsPersistence.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:7;complexity:3;coverage:0} |  | fn:[useSettingsPersistence] | Placeholder for settings persistence related hooks | src useSettingsPersistence.ts (small file)
./src/hooks/useSparkAuth.ts | {fanin:0;fanout:5;depth:1;churn:251;loc:680;complexity:184;coverage:0} | →[@external:react,@external:@supabase/supabase-js,src/types/types.ts,src/utils/dynamicSparkConfig.ts,@external:type] | fn:[useSparkAuth,UseSparkAuthReturn] |  | src useSparkAuth.ts (large file) (high complexity) (frequently changed)
./src/hooks/useSupabaseData.ts | {fanin:0;fanout:5;depth:1;churn:15;loc:1030;complexity:209;coverage:0} | →[@external:react,@external:@supabase/supabase-js,src/types/types.ts,src/lib/supabase.ts,@external:type] | fn:[useSupabaseData,UseSupabaseDataReturn] | @ts-nocheck | src useSupabaseData.ts (large file) (high complexity)
./src/hooks/useTopazUpscale.ts | {fanin:0;fanout:2;depth:1;churn:0;loc:73;complexity:11;coverage:0} | →[@external:react,src/services/topazService.ts] | fn:[UpscaleProgress,useTopazUpscale] | Use synchronous upscale for proper storage and lineage | src useTopazUpscale.ts
./src/hooks/useUndoRedo.ts | {fanin:0;fanout:1;depth:1;churn:0;loc:88;complexity:30;coverage:0} | →[@external:react] | fn:[UseUndoRedoOptions,UseUndoRedoResult,useUndoRedo] |  | src useUndoRedo.ts (high complexity)
./src/hooks/useVaultReferenceImages.ts | {fanin:0;fanout:5;depth:1;churn:97;loc:233;complexity:32;coverage:0} | →[@external:react,src/hooks/useReferenceImages.ts,src/components/references/handlers/index.ts,src/types/types.ts,@external:type] | fn:[UseVaultReferenceImagesArgs,useVaultReferenceImages] |  | src useVaultReferenceImages.ts (large file) (high complexity) (frequently changed)
./src/keycloakService.ts | {fanin:0;fanout:2;depth:1;churn:180;loc:61;complexity:11;coverage:0} | →[@external:keycloak-js,@external:Keycloak] | fn:[keycloak,initKeycloak] | Sync token to sessionStorage for the rest of the app (Spark expects this key) | src keycloakService.ts (frequently changed)
./src/lib/analysisUtils.ts | {fanin:0;fanout:1;depth:1;churn:0;loc:207;complexity:54;coverage:0} | →[src/lib/config.ts] | fn:[generateDetailedAnalysis,generateBasicAnalysis,generateMinimalAnalysis,enhancePromptWithAI,createAnalysisPrompt] |  | src analysisUtils.ts (large file) (high complexity)
./src/lib/config.ts | {fanin:0;fanout:0;depth:1;churn:17;loc:198;complexity:28;coverage:0} |  | fn:[REFERENCE_TYPES,WEIGHT_OPTIONS,STYLE_DEFINITIONS,GENERATION_MODELS,ANALYSIS_MODELS] |  | src config.ts (large file) (high complexity)
./src/lib/supabase.ts | {fanin:0;fanout:3;depth:1;churn:128;loc:883;complexity:100;coverage:0} | →[@external:@supabase/supabase-js,src/types/types.ts,@external:type] | fn:[Database,handleSupabaseError,validateRequired,projectOperations,sequenceOperations] |  | src supabase.ts (large file) (high complexity) (frequently changed)
./src/lib/webdavClient.ts | {fanin:0;fanout:3;depth:1;churn:85;loc:455;complexity:106;coverage:0} | →[@external:webdav,src/types/types.ts,@external:type] | fn:[getWebDAVConfig,createWebDAVClient,OCISWebDAVClient,SparkWebDAVClient,SignedURLClient] |  | src webdavClient.ts (large file) (high complexity) (frequently changed)
./src/main.tsx | {fanin:0;fanout:9;depth:1;churn:266;loc:116;complexity:39;coverage:0} | →[@external:react,@external:react-dom/client,@external:@chakra-ui/react,src/App.tsx,src/theme/invokeAITheme.ts,src/auth/SimpleKeycloakAuth.tsx,@external:React,@external:App,@external:theme] |  | Redact and throttle console output in production | src main.tsx (large file) (high complexity) (frequently changed)
./src/modules/ingest/IngestManager.tsx | {fanin:0;fanout:4;depth:1;churn:0;loc:249;complexity:110;coverage:0} | →[@external:react,@external:React,@external:versions,@external:into] | fn:[IngestManager,parsePngText,readV2State,readActiveTab,decideContext] | Lightweight PNG text chunk parser to extract Midjourney-style metadata | src IngestManager.tsx (large file) (high complexity)
./src/modules/metadata-panel/MetadataPanel.tsx | {fanin:0;fanout:25;depth:1;churn:784;loc:640;complexity:168;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/md,src/modules/metadata-panel/contexts/MetadataContext.tsx,src/modules/metadata-panel/selectors/TeamSelect.tsx,src/modules/metadata-panel/selectors/ProjectSelect.tsx,src/modules/metadata-panel/selectors/DepartmentSelect.tsx,src/hooks/useSparkAuth.ts,src/modules/metadata-panel/selectors/TaskSelect.tsx,src/modules/metadata-panel/selectors/AssetTypeSelect.tsx,src/modules/metadata-panel/selectors/AssetSelect.tsx,src/modules/metadata-panel/selectors/VariantSelect.tsx,src/modules/metadata-panel/selectors/SequenceSelect.tsx,src/modules/metadata-panel/selectors/ShotSelect.tsx,src/modules/metadata-panel/selectors/CharacterSelect.tsx,src/components/modals/CreateSequenceModal.tsx,src/components/modals/CreateShotModal.tsx,src/components/modals/CreateAssetModal.tsx,src/components/modals/CreateVariantModal.tsx,src/components/modals/CreateAssetTypeModal.tsx,src/components/modals/CreateDepartmentModal.tsx,src/components/modals/CreateTaskModal.tsx,src/components/modals/CreateProjectModal.tsx,src/utils/sparkStorage.ts,@external:React] | fn:[MetadataPanelV2] | Modals for creating entities | src MetadataPanel.tsx (large file) (high complexity) (frequently changed)
./src/modules/metadata-panel/contexts/MetadataContext.tsx | {fanin:0;fanout:7;depth:1;churn:11;loc:587;complexity:275;coverage:0} | →[@external:react,src/modules/metadata-panel/services/projects.ts,src/modules/metadata-panel/services/departments.ts,src/modules/metadata-panel/services/assets.ts,src/modules/metadata-panel/services/shots.ts,src/modules/metadata-panel/services/characters.ts,@external:React] | fn:[Id,Option,SelectorState,MetadataState,MetadataActions] | Assets context | src MetadataContext.tsx (large file) (high complexity)
./src/modules/metadata-panel/selectors/AssetSelect.tsx | {fanin:0;fanout:5;depth:1;churn:0;loc:39;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/io5,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:React] | fn:[AssetSelectProps,AssetSelect] | No documentation available | src AssetSelect.tsx
./src/modules/metadata-panel/selectors/AssetTypeSelect.tsx | {fanin:0;fanout:5;depth:1;churn:0;loc:39;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/io5,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:React] | fn:[AssetTypeSelectProps,AssetTypeSelect] | No documentation available | src AssetTypeSelect.tsx
./src/modules/metadata-panel/selectors/CharacterSelect.tsx | {fanin:0;fanout:5;depth:1;churn:0;loc:39;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/io5,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:React] | fn:[CharacterSelectProps,CharacterSelect] | No documentation available | src CharacterSelect.tsx
./src/modules/metadata-panel/selectors/DepartmentSelect.tsx | {fanin:0;fanout:5;depth:1;churn:8;loc:43;complexity:3;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/io5,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:React] | fn:[DepartmentSelectProps,DepartmentSelect] | No documentation available | src DepartmentSelect.tsx
./src/modules/metadata-panel/selectors/ProjectSelect.tsx | {fanin:0;fanout:6;depth:1;churn:0;loc:119;complexity:19;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/io5,@external:react-icons/md,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:React] | fn:[ProjectSelectProps,ProjectSelect] | Sort mode: 'recent' (last used) or 'alpha' (alphabetical) | src ProjectSelect.tsx (large file)
./src/modules/metadata-panel/selectors/SequenceSelect.tsx | {fanin:0;fanout:5;depth:1;churn:0;loc:40;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/io5,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:React] | fn:[SequenceSelectProps,SequenceSelect] | No documentation available | src SequenceSelect.tsx
./src/modules/metadata-panel/selectors/ShotSelect.tsx | {fanin:0;fanout:5;depth:1;churn:0;loc:40;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/io5,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:React] | fn:[ShotSelectProps,ShotSelect] | No documentation available | src ShotSelect.tsx
./src/modules/metadata-panel/selectors/TaskSelect.tsx | {fanin:0;fanout:5;depth:1;churn:8;loc:43;complexity:3;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/io5,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:React] | fn:[TaskSelectProps,TaskSelect] | No documentation available | src TaskSelect.tsx
./src/modules/metadata-panel/selectors/TeamSelect.tsx | {fanin:0;fanout:4;depth:1;churn:0;loc:28;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:React] | fn:[TeamSelectProps,TeamSelect] | No documentation available | src TeamSelect.tsx
./src/modules/metadata-panel/selectors/VariantSelect.tsx | {fanin:0;fanout:5;depth:1;churn:0;loc:39;complexity:1;coverage:0} | →[@external:react,@external:@chakra-ui/react,@external:react-icons/io5,src/modules/metadata-panel/contexts/MetadataContext.tsx,@external:React] | fn:[VariantSelectProps,VariantSelect] | No documentation available | src VariantSelect.tsx
./src/modules/metadata-panel/services/assets.ts | {fanin:0;fanout:2;depth:1;churn:38;loc:76;complexity:32;coverage:0} | →[src/modules/metadata-panel/contexts/MetadataContext.tsx,src/auth/useAuthorizedFetch.ts] | fn:[Result] | Provide files host so backend hits the correct org domain even in Docker | src assets.ts (high complexity)
./src/modules/metadata-panel/services/characters.ts | {fanin:0;fanout:2;depth:1;churn:0;loc:43;complexity:17;coverage:0} | →[src/modules/metadata-panel/contexts/MetadataContext.tsx,src/auth/useAuthorizedFetch.ts] | fn:[Result] | Filter out self/parent artifacts like "characters" | src characters.ts
./src/modules/metadata-panel/services/departments.ts | {fanin:0;fanout:2;depth:1;churn:0;loc:31;complexity:11;coverage:0} | →[src/modules/metadata-panel/contexts/MetadataContext.tsx,src/utils/projectMetadata.ts] | fn:[Result] | Zero-knowledge, no remote fetch: use default departments/tasks for now | src departments.ts
./src/modules/metadata-panel/services/projects.ts | {fanin:0;fanout:2;depth:1;churn:50;loc:80;complexity:30;coverage:0} | →[src/modules/metadata-panel/contexts/MetadataContext.tsx,src/auth/useAuthorizedFetch.ts] | fn:[Result,getTeams] | Prefer upgraded org name; fall back to normal org name; finally generic label | src projects.ts (high complexity)
./src/modules/metadata-panel/services/shots.ts | {fanin:0;fanout:2;depth:1;churn:26;loc:57;complexity:23;coverage:0} | →[src/modules/metadata-panel/contexts/MetadataContext.tsx,src/auth/useAuthorizedFetch.ts] | fn:[Result] | Provide files host so backend hits the correct org domain even in Docker | src shots.ts (high complexity)
./src/modules/model-docs/ModelDocsModal.tsx | {fanin:0;fanout:4;depth:1;churn:109;loc:86;complexity:12;coverage:0} | →[@external:react,@external:@chakra-ui/react,src/modules/model-docs/modelRegistry.ts,@external:React] | fn:[ModelDocsModal] | No documentation available | src ModelDocsModal.tsx (frequently changed)
./src/modules/model-docs/modelRegistry.ts | {fanin:0;fanout:2;depth:1;churn:34;loc:145;complexity:34;coverage:0} | →[src/promptEngine/capabilities.ts,src/config/pricing.ts] | fn:[MODEL_KEY_BY_LABEL,ProviderKey,ModelDocMeta,MODEL_DOCS,listModelLabelsAlphabetical] | UI label to engine key mapping (keep in sync with ModelsPanel order) | src modelRegistry.ts (large file) (high complexity)
./src/promptEngine/adapter.ts | {fanin:0;fanout:2;depth:1;churn:6;loc:99;complexity:4;coverage:0} | →[src/promptEngine/types.ts,@external:type] | fn:[UIStateForAdapter,toCanonicalSchema] | Minimal adapter from our current UI state shape to CanonicalSchema | src adapter.ts
./src/promptEngine/allowlist.json | {fanin:0;fanout:0;depth:1;churn:0;loc:11;complexity:1;coverage:0} |  |  | No documentation available | src allowlist.json
./src/promptEngine/audit.ts | {fanin:0;fanout:2;depth:1;churn:0;loc:37;complexity:12;coverage:0} | →[src/promptEngine/types.ts,@external:type] | fn:[AuditSnapshot] | Stable stringify by sorting keys shallowly | src audit.ts
./src/promptEngine/banlist.json | {fanin:0;fanout:0;depth:1;churn:39;loc:37;complexity:1;coverage:0} |  |  | No documentation available | src banlist.json
./src/promptEngine/capabilities.json | {fanin:0;fanout:0;depth:1;churn:9;loc:21;complexity:1;coverage:0} |  |  | No documentation available | src capabilities.json
./src/promptEngine/capabilities.ts | {fanin:0;fanout:4;depth:1;churn:113;loc:27;complexity:4;coverage:0} | →[src/promptEngine/types.ts,src/promptEngine/capabilities.json,@external:type,@external:CAPABILITIES_JSON] | fn:[getCapability,setCapabilities,getCapabilities] | Load capabilities from JSON file (supports hot-reload in dev via import.meta.hot) | src capabilities.ts (frequently changed)
./src/promptEngine/compliance.ts | {fanin:0;fanout:4;depth:1;churn:20;loc:96;complexity:23;coverage:0} | →[src/promptEngine/banlist.json,src/promptEngine/allowlist.json,@external:BANLIST,@external:ALLOW] | fn:[ComplianceDecision,AdjudicatorOutput,PreflightInput,stage1Banlist] | Compliance & IP Filter (stubs) per PRD Section 7 | src compliance.ts (high complexity)
./src/promptEngine/renderers/fluxKontext.ts | {fanin:0;fanout:2;depth:1;churn:63;loc:79;complexity:35;coverage:0} | →[src/promptEngine/types.ts,@external:type] | fn:[renderFluxKontext] | Core scene | src fluxKontext.ts (high complexity) (frequently changed)
./src/promptEngine/renderers/gptImage1.ts | {fanin:0;fanout:2;depth:1;churn:17;loc:70;complexity:27;coverage:0} | →[src/promptEngine/types.ts,@external:type] | fn:[renderGptImage1] | No documentation available | src gptImage1.ts (high complexity)
./src/promptEngine/renderers/hunyuan.ts | {fanin:0;fanout:2;depth:1;churn:0;loc:19;complexity:11;coverage:0} | →[src/promptEngine/types.ts,@external:type] | fn:[renderHunyuan] | Hunyuan prefers a plain, unheaded prompt. Keep it compact and literal. | src hunyuan.ts
./src/promptEngine/renderers/nanoBanana.ts | {fanin:0;fanout:2;depth:1;churn:72;loc:158;complexity:65;coverage:0} | →[src/promptEngine/types.ts,@external:type] | fn:[renderNanoBanana,adherenceRank] | Header | src nanoBanana.ts (large file) (high complexity) (frequently changed)
./src/promptEngine/renderers/qwenImage.ts | {fanin:0;fanout:2;depth:1;churn:54;loc:122;complexity:42;coverage:0} | →[src/promptEngine/types.ts,@external:type] | fn:[renderQwenImage,renderQwenImageEdit,renderQwenImageEditPlus,renderQwenImageI2I,commonHeader] | Use minimal, instruction-only format to avoid text overlays | src qwenImage.ts (large file) (high complexity) (frequently changed)
./src/promptEngine/renderers/router.ts | {fanin:0;fanout:7;depth:1;churn:5;loc:45;complexity:12;coverage:0} | →[src/promptEngine/types.ts,src/promptEngine/renderers/nanoBanana.ts,src/promptEngine/renderers/gptImage1.ts,src/promptEngine/renderers/fluxKontext.ts,src/promptEngine/renderers/qwenImage.ts,src/promptEngine/renderers/hunyuan.ts,@external:type] | fn:[renderAllPrompts] | For unknown/unsupported models, skip for now | src router.ts
./src/promptEngine/sizeResolver.ts | {fanin:0;fanout:1;depth:1;churn:468;loc:547;complexity:218;coverage:0} | →[src/lib/config.ts] | fn:[Orientation,Aspect,QualityTier,TargetTier,SizeIntent] | Model-smart size resolver (Phase 1) | src sizeResolver.ts (large file) (high complexity) (frequently changed)
./src/promptEngine/types.ts | {fanin:0;fanout:0;depth:1;churn:4;loc:80;complexity:2;coverage:0} |  | fn:[AdherenceLevel,CanonicalReference,CanonicalAnnotationRef,CanonicalStyleContext,ModelSpecificOptions] | Multi-Model Prompt Engine Types (per PRD-Multi-Model-Prompt-Engine) | src types.ts
./src/promptEngine/validator.ts | {fanin:0;fanout:3;depth:1;churn:16;loc:89;complexity:36;coverage:0} | →[src/promptEngine/types.ts,src/promptEngine/capabilities.ts,@external:type] | fn:[validateSchema] | Priority: keep highest: Annotation Refs > Strict > Strong > Flexible > Hint | src validator.ts (high complexity)
./src/services/ImageService.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:11;complexity:1;coverage:0} |  | fn:[ImageService] | TODO: implement auto-save logic | src ImageService.ts
./src/services/SettingsService.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:14;complexity:1;coverage:0} |  | fn:[AppSettings,SettingsService] | TODO: move settings persistence logic here | src SettingsService.ts
./src/services/falService.ts | {fanin:0;fanout:9;depth:1;churn:2420;loc:1543;complexity:647;coverage:0} | →[@external:@fal-ai/client,src/utils/apiBase.ts,src/utils/sparkStorage.ts,src/utils/sparkStorageUtils.ts,src/lib/config.ts,src/promptEngine/sizeResolver.ts,src/types/types.ts,src/services/publicUrl.ts,@external:type] | fn:[getLastSparkRefUrls,getLastFalRefMirrors,FalGenerationRequest,FalGenerationResponse] |  | src falService.ts (large file) (high complexity) (frequently changed)
./src/services/fundingStatusService.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:260;complexity:38;coverage:0} |  | fn:[fundingStatusService,OpenAIUsage,OpenRouterCredits,FALUsage,FundingStatusResponse] |  | src fundingStatusService.ts (large file) (high complexity)
./src/services/openaiService.ts | {fanin:0;fanout:3;depth:1;churn:299;loc:411;complexity:121;coverage:0} | →[src/types/types.ts,src/promptEngine/sizeResolver.ts,@external:type] | fn:[OpenAIImageRequest,OpenAIImageResponse,normalizeOpenAISize] |  | src openaiService.ts (large file) (high complexity) (frequently changed)
./src/services/openrouterService.ts | {fanin:0;fanout:2;depth:1;churn:69;loc:150;complexity:26;coverage:0} | →[src/types/types.ts,@external:type] | fn:[QwenAnalysisRequest,QwenAnalysisResponse] |  | src openrouterService.ts (large file) (high complexity) (frequently changed)
./src/services/publicUrl.ts | {fanin:0;fanout:1;depth:1;churn:0;loc:50;complexity:22;coverage:0} | →[src/utils/apiBase.ts] | fn:[getAuthHeader] |  | src publicUrl.ts (high complexity)
./src/services/sessionService.ts | {fanin:0;fanout:1;depth:1;churn:0;loc:110;complexity:44;coverage:0} | →[src/utils/apiBase.ts] | fn:[SessionListItem,SessionListResponse,defaultSessionFilename] |  | src sessionService.ts (large file) (high complexity)
./src/services/topazService.ts | {fanin:0;fanout:1;depth:1;churn:44;loc:535;complexity:125;coverage:0} | →[src/utils/apiBase.ts] | fn:[TopazUpscaleOptions,TopazJobResponse,TopazStatusResponse,TopazDownloadResponse,topazService] |  | src topazService.ts (large file) (high complexity)
./src/store/slices/generationSlice.ts | {fanin:0;fanout:1;depth:1;churn:0;loc:81;complexity:1;coverage:0} | →[@external:@reduxjs/toolkit] | fn:[GenerationSettings,GenerationState,generationSlice] |  | src generationSlice.ts
./src/store/slices/referenceImagesSlice.ts | {fanin:0;fanout:2;depth:1;churn:0;loc:73;complexity:10;coverage:0} | →[@external:@reduxjs/toolkit,@external:uuid] | fn:[ReferenceImage,ReferenceImagesState,referenceImagesSlice] |  | src referenceImagesSlice.ts
./src/store/store.ts | {fanin:0;fanout:5;depth:1;churn:0;loc:17;complexity:1;coverage:0} | →[@external:@reduxjs/toolkit,src/store/slices/referenceImagesSlice.ts,src/store/slices/generationSlice.ts,@external:referenceImagesReducer,@external:generationReducer] | fn:[store,RootState,AppDispatch] |  | src store.ts
./src/theme/invokeAITheme.ts | {fanin:0;fanout:1;depth:1;churn:46;loc:213;complexity:1;coverage:0} | →[@external:@chakra-ui/react] |  | InvokeAI-inspired color palette | src invokeAITheme.ts (large file)
./src/types/types.ts | {fanin:0;fanout:0;depth:1;churn:112;loc:915;complexity:33;coverage:0} |  | fn:[InputFormat,Tool,FileType,UploadMode,LogType] |  | src types.ts (large file) (high complexity) (frequently changed)
./src/utils/analytics.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:241;complexity:19;coverage:0} |  | fn:[trackEvent,trackImageGeneration,trackModelSelection,trackReferenceUpload,trackNavigation] |  | src analytics.ts (large file)
./src/utils/apiBase.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:24;complexity:6;coverage:0} |  | fn:[apiBase] | Minimal helper to resolve the backend API base for both dev and prod | src apiBase.ts
./src/utils/canvasInit.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:62;complexity:14;coverage:0} |  | fn:[initializeCanvas] | No documentation available | src canvasInit.ts
./src/utils/canvasRenderer.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:104;complexity:22;coverage:0} |  | fn:[BrushMode,applyDodgeBurn,updateBrushPreview] |  | src canvasRenderer.ts (large file) (high complexity)
./src/utils/canvasShapes.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:53;complexity:13;coverage:0} |  | fn:[ShapeMode,drawShape] | No documentation available | src canvasShapes.ts
./src/utils/deploymentCheck.ts | {fanin:0;fanout:1;depth:1;churn:30;loc:263;complexity:56;coverage:0} | →[src/utils/sparkStorage.ts] | fn:[DeploymentIssue,DeploymentStatus,checkDeploymentReadiness,generateDeploymentReport] |  | src deploymentCheck.ts (large file) (high complexity)
./src/utils/dynamicSparkConfig.ts | {fanin:0;fanout:2;depth:1;churn:49;loc:185;complexity:31;coverage:0} | →[src/types/types.ts,@external:type] | fn:[DynamicSparkConfig,generateSparkConfig,getCurrentSparkConfig,DYNAMIC_ENV_KEYS,STATIC_ENV_KEYS] |  | src dynamicSparkConfig.ts (large file) (high complexity)
./src/utils/fetchWithAuth.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:6;complexity:2;coverage:0} |  |  | No documentation available | src fetchWithAuth.ts (small file)
./src/utils/fingerprint/contentHash.ts | {fanin:0;fanout:2;depth:1;churn:0;loc:125;complexity:30;coverage:0} | →[src/utils/fingerprint/fingerprintTypes.ts,@external:type] | fn:[cleanHashString,formatHashString,getShortHash,compareHashes] |  | src contentHash.ts (large file) (high complexity)
./src/utils/fingerprint/fingerprintTypes.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:140;complexity:11;coverage:0} |  | fn:[OriginFingerprint,ContentHash,FingerprintEmbedPolicy,DEFAULT_EMBED_POLICY,ExtractedFingerprint] |  | src fingerprintTypes.ts (large file)
./src/utils/fingerprint/index.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:42;complexity:1;coverage:0} |  | fn:[DEFAULT_EMBED_POLICY,computeSHA256,computeContentHash,verifyContentHash,cleanHashString] |  | src index.ts
./src/utils/fingerprint/originFingerprint.ts | {fanin:0;fanout:2;depth:1;churn:7;loc:151;complexity:22;coverage:0} | →[src/utils/fingerprint/fingerprintTypes.ts,@external:type] | fn:[OriginFingerprintParams,parseOriginFingerprint,formatOriginFingerprint,compareOriginFingerprints,getShortFingerprint] |  | src originFingerprint.ts (large file) (high complexity)
./src/utils/imageAdjustments.ts | {fanin:0;fanout:0;depth:1;churn:6;loc:103;complexity:29;coverage:0} |  | fn:[Levels,HSL,applyRealtimeAdjustments] | Image adjustment utilities: levels + HSL with in-place draw */ | src imageAdjustments.ts (large file) (high complexity)
./src/utils/imageUtils.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:380;complexity:77;coverage:0} |  | fn:[makeDivisibleBy64,imageToBase64,createTiledImage,loadImageFromFile,downloadDataUrl] |  | src imageUtils.ts (large file) (high complexity)
./src/utils/metadata/imageMetadataEmbed.ts | {fanin:0;fanout:4;depth:1;churn:2;loc:112;complexity:17;coverage:0} | →[src/utils/metadata/pngMetadata.ts,src/utils/fingerprint/fingerprintTypes.ts,src/utils/metadata/imageMetadataExtract.ts,@external:type] |  |  | src imageMetadataEmbed.ts (large file)
./src/utils/metadata/imageMetadataExtract.ts | {fanin:0;fanout:3;depth:1;churn:0;loc:139;complexity:15;coverage:0} | →[src/utils/metadata/pngMetadata.ts,src/utils/fingerprint/fingerprintTypes.ts,@external:type] |  |  | src imageMetadataExtract.ts (large file)
./src/utils/metadata/index.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:37;complexity:1;coverage:0} |  | fn:[isPng,parsePngChunks,extractPngTextChunks,extractIntelliShotFingerprint,calculateCRC32] |  | src index.ts
./src/utils/metadata/pngMetadata.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:282;complexity:62;coverage:0} |  | fn:[PngChunk,PngTextChunks,isPng,parsePngChunks,extractPngTextChunks] |  | src pngMetadata.ts (large file) (high complexity)
./src/utils/projectMetadata.ts | {fanin:0;fanout:2;depth:1;churn:697;loc:558;complexity:134;coverage:0} | →[src/lib/supabase.ts,src/utils/apiBase.ts] | fn:[ProjectDepartment,ProjectDepartments,ProjectPipeline,ProjectPipelines,ProjectManifest] |  | src projectMetadata.ts (large file) (high complexity) (frequently changed)
./src/utils/projectNumberManager.js | {fanin:0;fanout:0;depth:1;churn:172;loc:234;complexity:64;coverage:0} |  | fn:[clearProjectCache] | Project Number Management Utilities | src projectNumberManager.js (large file) (high complexity) (frequently changed)
./src/utils/promptUtils.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:65;complexity:22;coverage:0} |  | fn:[getOrdinalSuffix,getWeightPrefix,enhancePromptWithAI,LogFunction,createAnalysisPrompt] |  | src promptUtils.ts (high complexity)
./src/utils/session/index.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:18;complexity:1;coverage:0} |  | fn:[toSessionReference,fromSessionReference,hydrateSessionReferences,migrateLegacyReferences,validateSessionReferences] |  | src index.ts
./src/utils/session/sessionVault.ts | {fanin:0;fanout:4;depth:1;churn:0;loc:229;complexity:38;coverage:0} | →[src/types/types.ts,src/utils/vault/referenceVault.ts,src/utils/vault/vaultStorage.ts,@external:type] | fn:[SessionReference,toSessionReference] |  | src sessionVault.ts (large file) (high complexity)
./src/utils/setupDatabase.ts | {fanin:0;fanout:1;depth:1;churn:0;loc:124;complexity:6;coverage:0} | →[src/lib/supabase.ts] | fn:[getDatabaseSetupSQL] |  | src setupDatabase.ts (large file)
./src/utils/sparkStorage.ts | {fanin:0;fanout:4;depth:1;churn:893;loc:858;complexity:258;coverage:0} | →[src/utils/dynamicSparkConfig.ts,src/auth/authorizedFetch.ts,src/utils/apiBase.ts,@external:type] | fn:[setCurrentSparkConfig,getWebDAVClient,legacySparkWebDAV,generateStoragePath,generateFileName] |  | src sparkStorage.ts (large file) (high complexity) (frequently changed)
./src/utils/sparkStorageSync.ts | {fanin:0;fanout:1;depth:1;churn:0;loc:290;complexity:34;coverage:0} | →[src/lib/supabase.ts] | fn:[SparkStorageStructure] |  | src sparkStorageSync.ts (large file) (high complexity)
./src/utils/sparkStorageUtils.ts | {fanin:0;fanout:2;depth:1;churn:93;loc:257;complexity:74;coverage:0} | →[src/utils/sparkStorage.ts,src/utils/apiBase.ts] | fn:[Organization,LogFunction,uploadReferenceImageToSpark,uploadToSparkStorage,fetchOriginalImage] |  | src sparkStorageUtils.ts (large file) (high complexity) (frequently changed)
./src/utils/vault/index.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:74;complexity:1;coverage:0} |  | fn:[ReferenceVault,getVaultRoot,getDailyPartition,getVaultFilePath,getVaultSidecarPath] |  | src index.ts
./src/utils/vault/referenceVault.ts | {fanin:0;fanout:7;depth:1;churn:219;loc:366;complexity:42;coverage:0} | →[src/utils/fingerprint/contentHash.ts,src/utils/fingerprint/originFingerprint.ts,src/utils/vault/vaultTypes.ts,src/utils/vault/vaultStorage.ts,src/utils/vault/vaultIndexes.ts,src/utils/metadata/imageMetadataExtract.ts,@external:type] | fn:[ReferenceVault] |  | src referenceVault.ts (large file) (high complexity) (frequently changed)
./src/utils/vault/testVault.ts | {fanin:0;fanout:3;depth:1;churn:12;loc:112;complexity:14;coverage:0} | →[src/utils/vault/referenceVault.ts,src/utils/vault/vaultTypes.ts,@external:type] | fn:[logVaultTestInstructions,createTestImage] |  | src testVault.ts (large file)
./src/utils/vault/vaultIndexes.ts | {fanin:0;fanout:3;depth:1;churn:191;loc:350;complexity:58;coverage:0} | →[src/utils/vault/vaultTypes.ts,src/utils/vault/vaultStorage.ts,@external:type] | fn:[IndexType,getDefaultMetadata,getAuthToken] |  | src vaultIndexes.ts (large file) (high complexity) (frequently changed)
./src/utils/vault/vaultIntegration.ts | {fanin:0;fanout:3;depth:1;churn:19;loc:238;complexity:38;coverage:0} | →[src/components/references/handlers/index.ts,src/types/types.ts,@external:type] | fn:[getProjectContextFromMetadata,getUserEmail,createVaultAwareDropHandler,isVaultAvailable,getVaultStatus] |  | src vaultIntegration.ts (large file) (high complexity)
./src/utils/vault/vaultStorage.ts | {fanin:0;fanout:2;depth:1;churn:252;loc:389;complexity:79;coverage:0} | →[src/utils/vault/vaultTypes.ts,@external:type] | fn:[getVaultRoot,getDailyPartition,getVaultFilePath,getCanonicalVaultFilePath,getVaultSidecarPath] |  | src vaultStorage.ts (large file) (high complexity) (frequently changed)
./src/utils/vault/vaultTypes.ts | {fanin:0;fanout:2;depth:1;churn:46;loc:323;complexity:14;coverage:0} | →[src/utils/fingerprint/fingerprintTypes.ts,@external:type] | fn:[ReferenceSourceKind,ReferenceSource,PromptSnapshot,SettingsSnapshot,AnalysisMetadata] |  | src vaultTypes.ts (large file)
./src/vite-env.d.ts | {fanin:0;fanout:0;depth:1;churn:0;loc:22;complexity:1;coverage:0} |  | fn:[ImportMetaEnv,ImportMeta] | <reference types="vite/client" /> | src vite-env.d.ts
./test-graph-api.js | {fanin:0;fanout:0;depth:1;churn:0;loc:39;complexity:12;coverage:0} |  |  | Quick test to verify Graph API access | root test-graph-api.js
./tsconfig.app.json | {fanin:0;fanout:0;depth:1;churn:0;loc:25;complexity:1;coverage:0} |  |  | No documentation available | root tsconfig.app.json
./tsconfig.json | {fanin:0;fanout:0;depth:1;churn:0;loc:8;complexity:1;coverage:0} |  |  | No documentation available | root tsconfig.json (small file)
./tsconfig.node.json | {fanin:0;fanout:0;depth:1;churn:0;loc:16;complexity:1;coverage:0} |  |  | No documentation available | root tsconfig.node.json
./vite.config.d.ts | {fanin:0;fanout:1;depth:1;churn:0;loc:3;complexity:1;coverage:0} | →[@external:vite] |  | No documentation available | root vite.config.d.ts (small file)
./vite.config.js | {fanin:0;fanout:4;depth:1;churn:39;loc:60;complexity:3;coverage:0} | →[@external:vite,@external:@vitejs/plugin-react,@external:node:child_process,@external:react] |  | Dev helper plugin: allow UI to start backend server (node server.cjs) | root vite.config.js
./vite.config.ts | {fanin:0;fanout:4;depth:1;churn:41;loc:61;complexity:5;coverage:0} | →[@external:vite,@external:@vitejs/plugin-react,@external:node:child_process,@external:react] |  | Dev helper plugin: allow UI to start backend server (node server.cjs) | root vite.config.ts
@END